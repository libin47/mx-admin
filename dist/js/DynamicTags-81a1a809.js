import{ce as w,bk as x,cf as P,cg as $,ch as K,a4 as k,f as W,aN as E,V as H,U as Y,ai as _,H as f,a7 as L,Z as M,aj as Z,n as S,Y as q,$ as u,L as G,N as J,a1 as Q,d as X,aY as ee,b5 as te,ac as N}from"./index-d885f019.js";import{t as ae,N as ne,c as se}from"./Tag-b4c59312.js";import{A as ie}from"./Add-cf9d4bc6.js";import{s as le}from"./prop-0f12dfb2.js";const ue=w({name:"DynamicTags",common:x,peers:{Input:P,Button:$,Tag:ae,Space:K},self(){return{inputWidth:"64px"}}});var re=ue,oe=k("dynamic-tags",[k("input",{minWidth:"var(--n-input-width)"})]);const de=Object.assign(Object.assign(Object.assign({},L.props),se),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]});var fe=W({name:"DynamicTags",props:de,setup(t){E(()=>{t.onChange!==void 0&&ee("dynamic-tags","`on-change` is deprecated, please use `on-update:value` instead.")});const{mergedClsPrefixRef:h,inlineThemeDisabled:r}=H(t),{localeRef:o}=Y("DynamicTags"),d=_(t),{mergedDisabledRef:s}=d,c=f(""),m=f(!1),p=f(!0),v=f(null),y=L("DynamicTags","-dynamic-tags",oe,re,t,h),b=f(t.defaultValue),F=M(t,"value"),i=Z(F,b),O=S(()=>o.value.add),z=S(()=>le(t.size)),C=S(()=>s.value||!!t.max&&i.value.length>=t.max);function T(e){const{onChange:a,"onUpdate:value":g,onUpdateValue:B}=t,{nTriggerFormInput:U,nTriggerFormChange:j}=d;a&&N(a,e),B&&N(B,e),g&&N(g,e),b.value=e,U(),j()}function I(e){const a=i.value.slice(0);a.splice(e,1),T(a)}function D(e){switch(e.key){case"Enter":l()}}function l(e){const a=e??c.value;if(a){const g=i.value.slice(0);g.push(a),T(g)}m.value=!1,p.value=!0,c.value=""}function R(){l()}function A(){m.value=!0,te(()=>{var e;(e=v.value)===null||e===void 0||e.focus(),p.value=!1})}const V=S(()=>{const{self:{inputWidth:e}}=y.value;return{"--n-input-width":e}}),n=r?q("dynamic-tags",void 0,V,t):void 0;return{mergedClsPrefix:h,inputInstRef:v,localizedAdd:O,inputSize:z,inputValue:c,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:C,handleInputKeyUp:D,handleAddClick:A,handleInputBlur:R,handleCloseClick:I,handleInputConfirm:l,mergedTheme:y,cssVars:r?void 0:V,themeClass:n?.themeClass,onRender:n?.onRender}},render(){const{mergedTheme:t,cssVars:h,mergedClsPrefix:r,onRender:o,renderTag:d}=this;return o?.(),u(X,{class:[`${r}-dynamic-tags`,this.themeClass],size:"small",style:h,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:c,type:m,round:p,size:v,color:y,closable:b,mergedDisabled:F,showInput:i,inputValue:O,inputStyle:z,inputSize:C,inputForceFocused:T,triggerDisabled:I,handleInputKeyUp:D,handleInputBlur:l,handleAddClick:R,handleCloseClick:A,handleInputConfirm:V,$slots:n}=this;return this.mergedValue.map((e,a)=>d?d(e,a):u(ne,{key:a,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:c,type:m,round:p,size:v,color:y,closable:b,disabled:F,onClose:()=>A(a)},{default:()=>typeof e=="string"?e:e.label})).concat(i?n.input?n.input({submit:V,deactivate:l}):u(G,Object.assign({placeholder:"",size:C,style:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:O,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:D,onBlur:l,internalForceFocus:T})):n.trigger?n.trigger({activate:R,disabled:I}):u(J,{dashed:!0,disabled:I,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:C,onClick:R},{icon:()=>u(Q,{clsPrefix:r},{default:()=>u(ie,null)})}))}})}});export{fe as N};

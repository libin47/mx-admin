import{T as c}from"./index-edb3ff22.js";import{u as d}from"./use-table-7eba66f5.js";import{f,R as s,m as h,a as r,C as y,cX as g,d as T,N as x,b as i}from"./index-8eac1ff4.js";import{t as C}from"./index-468b947e.js";import{N as k}from"./Popconfirm-e332df69.js";import"./DataTable-f6ed0843.js";import"./ChevronRight-bef4a6be.js";import"./Checkbox-2ecdd3a4.js";import"./index-2488235d.js";import"./Icon-2092b1d2.js";import"./prop-46b62c35.js";import"./Select-e56a7f39.js";import"./Tag-f56d7815.js";import"./Forward-6182c0eb.js";import"./Tooltip-2f77c19b.js";import"./transform-da9e8e2a.js";import"./_arrayEach-2ff48152.js";var z=f({setup(){const{data:n,fetchDataFn:l,loading:u}=d(t=>async()=>{const a=await s.api.health.cron.get();t.value=Array.from(Object.values(a.data).map(e=>({...e,_name:e.name,name:C(e.name)})))});h(async()=>{await l()});const m=async(t,a)=>{await s.api.health.cron.run(t).post();let e=setTimeout(function p(){s.api.health.cron.task(t).get().then(o=>{o.status==="fulfill"?(message.success(`${a} \u6267\u884C\u5B8C\u6210`),e=clearTimeout(e)):o.status==="reject"?(message.error(`${a} \u6267\u884C\u5931\u8D25, ${o.message}`),e=clearTimeout(e)):e=setTimeout(p,1e3)})},1e3)};return()=>r(y,null,{default:()=>[r(c,{noPagination:!0,data:n,loading:u.value,nTableProps:{maxHeight:"calc(100vh - 17rem)"},maxWidth:500,columns:[{title:"\u4EFB\u52A1",key:"name",ellipsis:{tooltip:!0},width:150},{title:"\u63CF\u8FF0",key:"description",width:250,ellipsis:{tooltip:!0}},{title:"\u72B6\u6001",key:"status"},{title:"\u4E0B\u6B21\u6267\u884C",key:"",render(t){const a=t.nextDate;return a?g(new Date(a),"MM/dd/yyyy hh:mm:ss"):"N/A"}},{title:"\u64CD\u4F5C",key:"",render(t){return r(T,null,{default:()=>[r(k,{onPositiveClick:()=>void m(t._name,t.name)},{trigger(){return r(x,{size:"tiny",text:!0,type:"success"},{default:()=>[i("\u6267\u884C")]})},default:()=>r("span",{class:"max-w-48"},[i("\u786E\u5B9A\u8981\u6267\u884C?")])})]})}}]},null)]})}});export{z as default};
